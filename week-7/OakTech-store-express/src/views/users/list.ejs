<div class="page-shell">

  <!-- TOP STATS -->
  <section class="stats-row">
    <div class="stat-card">
      <p class="stat-label">Total Users</p>
      <p class="stat-value"><%= users ? users.length : 0 %></p>
      <p class="stat-foot">All registered accounts</p>
    </div>

    <div class="stat-card">
      <p class="stat-label">Active Users</p>
      <p class="stat-value"><%= users ? users.length : 0 %></p>
      <p class="stat-foot">Currently marked as active</p>
    </div>

    <div class="stat-card">
      <p class="stat-label">New This Week</p>
      <p class="stat-value">3</p>
      <p class="stat-foot">Sample data (UI only)</p>
    </div>
  </section>

  <!-- MAIN PANEL -->
  <div class="panel">

    <!-- Header row -->
    <div class="panel-header panel-header-users">
      <div>
        <h1 class="panel-title">Users</h1>
        <p class="panel-subtitle">Manage store customers and team members.</p>
      </div>

      <div class="panel-header-right">
        <form class="user-search-form" method="get" action="/users">
          <div class="input-pill">
            <input
              type="text"
              name="q"
              placeholder="Search name or emailâ€¦"
              value="<%= typeof q !== 'undefined' ? q : '' %>">
          </div>

          <select class="input-select" name="status">
            <option value="">All</option>
            <option value="active" selected>Active</option>
            <option value="blocked">Blocked</option>
          </select>
        </form>

        <a href="/users/new" class="btn-primary">
          + Add User
        </a>
      </div>
    </div>

    <!-- Users table -->
    <table class="user-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th class="th-center">Role</th>
          <th class="th-center">Status</th>
          <th class="th-right">Actions</th>
        </tr>
      </thead>

      <tbody>
        <% if (users && users.length) { %>
          <% users.forEach(u => { %>
            <tr>
              <td>
                <div class="user-cell">
                  <div class="user-avatar">
                    <span>
                      <%= (u.name || '?').trim().split(' ').map(p => p[0]).join('').toUpperCase() %>
                    </span>
                  </div>
                  <div class="user-info">
                    <div class="user-name"><%= u.name %></div>
                    <div class="user-id">ID: <%= u.id %></div>
                  </div>
                </div>
              </td>

              <td class="user-email">
                <%= u.email %>
              </td>

              <td class="td-center">
                <span class="pill pill-neutral">Customer</span>
              </td>

              <td class="td-center">
                <span class="pill pill-success">Active</span>
              </td>

              <td class="td-right">
                <div class="user-actions">
                  <a href="/users/<%= u.id %>/edit" class="icon-btn-mini" title="Edit">âœï¸</a>
                  <a href="/users/<%= u.id %>/delete" class="icon-btn-mini icon-btn-danger" title="Delete">ğŸ—‘ï¸</a>
                </div>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="5" class="user-empty">
              No users yet. Click <strong>â€œ+ Add Userâ€</strong> to create one.
            </td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>

</div>
